<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>CTF Final</title>
    <style>
      body {
        text-align: center;
        font-family: Arial, sans-serif;
        margin-top: 50px;
      }
    </style>
  </head>
  <body>
    <h1>Congrats!!</h1>
    <p>You made it to the final stage. But where is the flag? I wonder where to inspect?</p>
    <!-- flag3{hog_malko} -->

    <canvas id="confetti" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;"></canvas>
    
    <script>
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      class ConfettiPiece {
        constructor() {
          this.x = canvas.width / 2;
          this.y = 0;
          this.size = Math.random() * 8 + 4;
          this.color = `hsl(${Math.random() * 360}, 80%, 60%)`;
          this.speedX = (Math.random() - 0.5) * 6;
          this.speedY = Math.random() * 4 + 3;
          this.shape = Math.random() > 0.5 ? "circle" : "rect";
          this.rotation = Math.random() * 360;
        }

        update() {
          this.x += this.speedX;
          this.y += this.speedY;
          this.rotation += this.speedX * 2;
        }

        draw(ctx) {
          ctx.save();
          ctx.translate(this.x, this.y);
          ctx.rotate(this.rotation * Math.PI / 180);
          ctx.fillStyle = this.color;

          if (this.shape === "circle") {
            ctx.beginPath();
            ctx.arc(0, 0, this.size / 2, 0, Math.PI * 2);
            ctx.fill();
          } else {
            ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
          }

          ctx.restore();
        }
      }

      const confettiPieces = Array.from({ length: 120 }, () => new ConfettiPiece());

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        confettiPieces.forEach(p => {
          p.update();
          p.draw(ctx);
        });

        // Stop once all confetti is out of screen
        if (confettiPieces.some(p => p.y < canvas.height + 50)) {
          requestAnimationFrame(animate);
        } else {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }

      animate();
    </script>
  </body>
</html>
